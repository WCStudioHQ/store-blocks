{"version":3,"file":"product-table/view.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACAA,MAAM,CAACC,QAAQ,CAAC,CAACC,KAAK,CAAC,UAASC,CAAC,EAAE;EAC/BA,CAAC,CAAC,kBAAkB,CAAC,CAACC,KAAK,CAAC,UAASC,KAAK,EAAE;IACxCA,KAAK,CAACC,cAAc,CAAC,CAAC,CAAC,CAAC;;IAExB,IAAIC,MAAM,GAAGJ,CAAC,CAAC,IAAI,CAAC;IACpB,IAAIK,SAAS,GAAGD,MAAM,CAACE,IAAI,CAAC,YAAY,CAAC;IACzC,IAAIC,QAAQ,GAAGH,MAAM,CAACI,OAAO,CAAC,IAAI,CAAC,CAACC,IAAI,CAAC,WAAW,CAAC,CAACC,GAAG,CAAC,CAAC;IAC3DC,OAAO,CAACC,GAAG,CAACP,SAAS,EAAEE,QAAQ,CAAC;IAChCP,CAAC,CAACa,IAAI,CAAC;MACHC,IAAI,EAAE,MAAM;MACZC,GAAG,EAAEC,eAAe,CAACC,QAAQ;MAAE;MAC/BX,IAAI,EAAE;QACFY,MAAM,EAAE,0BAA0B;QAClCC,UAAU,EAAEd,SAAS;QACrBE,QAAQ,EAAEA;MACd,CAAC;MACDa,UAAU,EAAE,SAAAA,CAAA,EAAW;QACnBhB,MAAM,CAACiB,IAAI,CAAC,WAAW,CAAC,CAACC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC;MACnD,CAAC;MACDC,OAAO,EAAE,SAAAA,CAASC,QAAQ,EAAE;QACxB,IAAIA,QAAQ,CAACD,OAAO,EAAE;UAClBvB,CAAC,CAAC,eAAe,CAAC,CAACqB,IAAI,CAAC,IAAI,GAAGG,QAAQ,CAACC,OAAO,CAAC,CAACC,MAAM,CAAC,CAAC,CAACC,KAAK,CAAC,IAAI,CAAC,CAACC,OAAO,CAAC,CAAC;UAC/E,IAAIC,SAAS,GAAG7B,CAAC,CAAC,aAAa,CAAC;UAChC,IAAI6B,SAAS,CAACC,MAAM,EAAE;YAClBD,SAAS,CAACR,IAAI,CAACG,QAAQ,CAACO,UAAU,CAAC;UACvC;QACJ,CAAC,MAAM;UACHC,KAAK,CAAC,SAAS,GAAGR,QAAQ,CAACC,OAAO,CAAC;QACvC;MACJ,CAAC;MACDQ,KAAK,EAAE,SAAAA,CAAA,EAAW;QACdD,KAAK,CAAC,+BAA+B,CAAC;MAC1C,CAAC;MACDE,QAAQ,EAAE,SAAAA,CAAA,EAAW;QACjB9B,MAAM,CAACiB,IAAI,CAAC,aAAa,CAAC,CAACC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC;MACtD;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC,CAAC,C","sources":["webpack://store-blocks/./src/product-table/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\n\n/* eslint-enable no-console */\njQuery(document).ready(function($) {\n    $(\".add-to-cart-btn\").click(function(event) {\n        event.preventDefault(); // Prevent page refresh\n\n        let button = $(this);\n        let productId = button.data(\"product_id\");\n        let quantity = button.closest(\"tr\").find(\".quantity\").val();\n        console.log(productId, quantity);\n        $.ajax({\n            type: \"POST\",\n            url: storeBlocksData.ajax_url, // From wp_localize_script\n            data: {\n                action: \"store_blocks_add_to_cart\",\n                product_id: productId,\n                quantity: quantity\n            },\n            beforeSend: function() {\n                button.text(\"Adding...\").prop(\"disabled\", true);\n            },\n            success: function(response) {\n                if (response.success) {\n                    $(\"#cart-message\").text(\"âœ” \" + response.message).fadeIn().delay(2000).fadeOut();\n                    let cartCount = $(\"#cart-count\");\n                    if (cartCount.length) {\n                        cartCount.text(response.cart_count);\n                    }\n                } else {\n                    alert(\"Error: \" + response.message);\n                }\n            },\n            error: function() {\n                alert(\"Error: Could not add to cart.\");\n            },\n            complete: function() {\n                button.text(\"Add to Cart\").prop(\"disabled\", false);\n            }\n        });\n    });\n});\n\n\n\n"],"names":["jQuery","document","ready","$","click","event","preventDefault","button","productId","data","quantity","closest","find","val","console","log","ajax","type","url","storeBlocksData","ajax_url","action","product_id","beforeSend","text","prop","success","response","message","fadeIn","delay","fadeOut","cartCount","length","cart_count","alert","error","complete"],"sourceRoot":""}